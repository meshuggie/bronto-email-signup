!function e(n,t,i){function a(s,o){if(!t[s]){if(!n[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var d=t[s]={exports:{}};n[s][0].call(d.exports,function(e){var t=n[s][1][e];return a(t?t:e)},d,d.exports,e,n,t,i)}return t[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,n,t){var i,a=e("form-serialize");!function(e){"use strict";function n(){e(".notice").remove()}function t(e,n){var t='<li data-name="'+n.name+'" data-value="'+e+'">';return t+='<div class="field sort">',t+='<input type="hidden" name="broes_fields['+i+'][id]" value="'+e+'">',t+="<span>"+n.name+"</span>",t+='<span class="remove dashicons dashicons-no-alt"></span>',t+="</div>",t+='<div class="field">',t+='<input type="checkbox" id="'+n.name+'-required" name="broes_fields['+i+'][required]" value="'+e+'">',t+='<label for="'+n.name+'-required">Required</label>',t+="</div>","text"==n.type&&(t+='<div class="field field-hidden">',t+='<input type="checkbox" id="'+e+'-hidden" name="broes_fields['+i+'][hidden]" value="'+e+'">',t+='<label for="'+e+'-hidden">Hidden</label>',t+="</div>",t+='<div class="field field-value hidden">',t+='<label for="'+e+'-value">Value</label>',t+='<input type="text" id="'+n.name+'-value" name="broes_fields['+i+'][value]">',t+="</div>"),t+="</li>",i++,t}function r(e,n){n?(e.find("form").addClass("disabled"),e.find("fieldset").prop("disabled"),e.find(".loading").removeClass("hidden")):(e.find("form").removeClass("disabled"),e.find("fieldset").removeAttr("disabled"),e.find(".loading").addClass("hidden"))}e(window).on("load",function(){var s=e(".bronto-email-signup"),o=e(".sortable ul"),l=e(".sortable select");o.sortable({stop:function(n,t){e(".sortable li").each(function(n){e(this).find("input").each(function(){var t=e(this).attr("name"),i=t.replace(/broes_fields\[\d*\]\[(.*?)\]/,"broes_fields["+n+"][$1]");e(this).attr("name",i)})})}}),r(s,!1),e(".sortable-form button").on("click",function(n){n.preventDefault();var a=e(this).parents(".sortable-form").find("option:selected");i=e(".sortable li").length,a.prop("disabled",!0).prop("selected",!1),o.append(t(a.val(),a.data()))}),e("body").on("click",".sortable .remove",function(){var n=e(this).parents("li"),t=n.data("value");n.data("name");n.remove(),l.find('option[value="'+t+'"]').prop("disabled",!1)}),e("body").on("click",".field-hidden input",function(){e(this).parents(".field-hidden").next(".field-value").toggleClass("hidden")});var d=e("#bronto-email-signup-form").validate({rules:{broes_api_key:"required"}});e("body").on("click","#bronto-email-signup-form .button",function(t){t.preventDefault();var i;"test-connection"==e(this).attr("name")?(e("#broes_test_email").rules("add",{required:!0,email:!0}),i="broes_add_contact"):(e("#broes_test_email").rules("remove"),i="broes_update_settings");var o=a(e(this).parents("#bronto-email-signup-form")[0],{hash:!0});return o.action=i,o._ajax_nonce=broes.nonce,!!d.form()&&(r(s,!0),void e.post(broes.ajax_url,o,function(t){var a,o=e("broes_add_contact"==i?"#test-connection-form":".wrap");r(s,!1),"success"==t.result?(a='<div id="setting-error-settings_updated" class="updated settings-error notice is-dismissible">',a+="<p>"+t.message+"</p>",a+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',a+="</div>"):(a='<div class="error">',a+="<p>"+t.message+"</p>",a+="</div>"),n(),o.prepend(a),"broes_update_settings"==i&&(e("#bronto-email-signup-form .hidden").length&&window.location.reload(!0),e("body").animate({scrollTop:0},350,"linear"))},"json"))}),e("body").on("click",".notice-dismiss",function(){n()})})}(jQuery)},{"form-serialize":2}],2:[function(e,n,t){function i(e,n){"object"!=typeof n?n={hash:!!n}:void 0===n.hash&&(n.hash=!0);for(var t=n.hash?{}:"",i=n.serializer||(n.hash?s:o),a=e&&e.elements?e.elements:[],r=Object.create(null),u=0;u<a.length;++u){var c=a[u];if((n.disabled||!c.disabled)&&c.name&&d.test(c.nodeName)&&!l.test(c.type)){var f=c.name,p=c.value;if("checkbox"!==c.type&&"radio"!==c.type||c.checked||(p=void 0),n.empty){if("checkbox"!==c.type||c.checked||(p=""),"radio"===c.type&&(r[c.name]||c.checked?c.checked&&(r[c.name]=!0):r[c.name]=!1),!p&&"radio"==c.type)continue}else if(!p)continue;if("select-multiple"!==c.type)t=i(t,f,p);else{p=[];for(var v=c.options,m=!1,h=0;h<v.length;++h){var b=v[h],y=n.empty&&!b.value,g=b.value||y;b.selected&&g&&(m=!0,t=n.hash&&"[]"!==f.slice(f.length-2)?i(t,f+"[]",b.value):i(t,f,b.value))}!m&&n.empty&&(t=i(t,f,""))}}}if(n.empty)for(var f in r)r[f]||(t=i(t,f,""));return t}function a(e){var n=[],t=/^([^\[\]]*)/,i=new RegExp(u),a=t.exec(e);for(a[1]&&n.push(a[1]);null!==(a=i.exec(e));)n.push(a[1]);return n}function r(e,n,t){if(0===n.length)return e=t;var i=n.shift(),a=i.match(/^\[(.+?)\]$/);if("[]"===i)return e=e||[],Array.isArray(e)?e.push(r(null,n,t)):(e._values=e._values||[],e._values.push(r(null,n,t))),e;if(a){var s=a[1],o=+s;isNaN(o)?(e=e||{},e[s]=r(e[s],n,t)):(e=e||[],e[o]=r(e[o],n,t))}else e[i]=r(e[i],n,t);return e}function s(e,n,t){var i=n.match(u);if(i){var s=a(n);r(e,s,t)}else{var o=e[n];o?(Array.isArray(o)||(e[n]=[o]),e[n].push(t)):e[n]=t}return e}function o(e,n,t){return t=t.replace(/(\r)?\n/g,"\r\n"),t=encodeURIComponent(t),t=t.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(n)+"="+t}var l=/^(?:submit|button|image|reset|file)$/i,d=/^(?:input|select|textarea|keygen)/i,u=/(\[[^\[\]]*\])/g;n.exports=i},{}]},{},[1]);