!function e(n,t,i){function a(o,s){if(!t[o]){if(!n[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var d=t[o]={exports:{}};n[o][0].call(d.exports,function(e){var t=n[o][1][e];return a(t?t:e)},d,d.exports,e,n,t,i)}return t[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,n,t){var i,a=e("form-serialize");!function(e){"use strict";function n(){e(".notice").remove()}function t(e,n){var t='<li data-name="'+n.name+'" data-value="'+e+'">';return t+='<div class="field sort">',t+='<input type="hidden" name="broes_fields['+i+'][id]" value="'+e+'">',t+="<span>"+n.name+"</span>",t+='<span class="remove dashicons dashicons-no-alt"></span>',t+="</div>",t+='<div class="field">',t+='<input type="checkbox" id="'+n.name+'-required" name="broes_fields['+i+'][required]" value="'+e+'">',t+='<label for="'+n.name+'-required">Required</label>',t+="</div>","text"==n.type&&(t+='<div class="field field-hidden">',t+='<input type="checkbox" id="'+e+'-hidden" name="broes_fields['+i+'][hidden]" value="'+e+'">',t+='<label for="'+e+'-hidden">Hidden</label>',t+="</div>",t+='<div class="field field-value hidden">',t+='<label for="'+e+'-value">Value</label>',t+='<input type="text" id="'+n.name+'-value" name="broes_fields['+i+'][value]">',t+="</div>"),t+="</li>",i++,t}function r(e,n){n?(e.find("form").addClass("disabled"),e.find("fieldset").prop("disabled"),e.find(".loading").removeClass("hidden")):(e.find("form").removeClass("disabled"),e.find("fieldset").removeAttr("disabled"),e.find(".loading").addClass("hidden"))}e(window).on("load",function(){var o=e(".bronto-email-signup"),s=e(".sortable ul"),l=e(".sortable select");i=e(".sortable li").length,console.log(i),s.sortable({stop:function(e,n){}}),r(o,!1),e(".sortable-form button").on("click",function(n){n.preventDefault();var i=e(this).parents(".sortable-form").find("option:selected");i.prop("disabled",!0).prop("selected",!1),s.append(t(i.val(),i.data()))}),e("body").on("click",".sortable .remove",function(){var n=e(this).parents("li"),t=n.data("value");n.data("name");n.remove(),l.find('option[value="'+t+'"]').prop("disabled",!1)}),e("body").on("click",".field-hidden input",function(){e(this).parents(".field-hidden").next(".field-value").toggleClass("hidden")});var d=e("#bronto-email-signup-form").validate({rules:{broes_api_key:"required"}});e("body").on("click","#bronto-email-signup-form .button",function(t){t.preventDefault();var i;"test-connection"==e(this).attr("name")?(e("#broes_test_email").rules("add",{required:!0,email:!0}),i="broes_add_contact"):(e("#broes_test_email").rules("remove"),i="broes_update_settings");var s=a(e(this).parents("#bronto-email-signup-form")[0],{hash:!0});return s.action=i,s._ajax_nonce=broes.nonce,!!d.form()&&(r(o,!0),void e.post(broes.ajax_url,s,function(t){var a,s=e("broes_add_contact"==i?"#test-connection-form":".wrap");r(o,!1),"success"==t.result?(a='<div id="setting-error-settings_updated" class="updated settings-error notice is-dismissible">',a+="<p>"+t.message+"</p>",a+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',a+="</div>"):(a='<div class="error">',a+="<p>"+t.message+"</p>",a+="</div>"),n(),s.prepend(a),"broes_update_settings"==i&&(e("#bronto-email-signup-form .hidden").length&&window.location.reload(!0),e("body").animate({scrollTop:0},350,"linear"))},"json"))}),e("body").on("click",".notice-dismiss",function(){n()})})}(jQuery)},{"form-serialize":2}],2:[function(e,n,t){function i(e,n){"object"!=typeof n?n={hash:!!n}:void 0===n.hash&&(n.hash=!0);for(var t=n.hash?{}:"",i=n.serializer||(n.hash?o:s),a=e&&e.elements?e.elements:[],r=Object.create(null),u=0;u<a.length;++u){var c=a[u];if((n.disabled||!c.disabled)&&c.name&&d.test(c.nodeName)&&!l.test(c.type)){var f=c.name,p=c.value;if("checkbox"!==c.type&&"radio"!==c.type||c.checked||(p=void 0),n.empty){if("checkbox"!==c.type||c.checked||(p=""),"radio"===c.type&&(r[c.name]||c.checked?c.checked&&(r[c.name]=!0):r[c.name]=!1),!p&&"radio"==c.type)continue}else if(!p)continue;if("select-multiple"!==c.type)t=i(t,f,p);else{p=[];for(var v=c.options,m=!1,b=0;b<v.length;++b){var h=v[b],y=n.empty&&!h.value,g=h.value||y;h.selected&&g&&(m=!0,t=n.hash&&"[]"!==f.slice(f.length-2)?i(t,f+"[]",h.value):i(t,f,h.value))}!m&&n.empty&&(t=i(t,f,""))}}}if(n.empty)for(var f in r)r[f]||(t=i(t,f,""));return t}function a(e){var n=[],t=/^([^\[\]]*)/,i=new RegExp(u),a=t.exec(e);for(a[1]&&n.push(a[1]);null!==(a=i.exec(e));)n.push(a[1]);return n}function r(e,n,t){if(0===n.length)return e=t;var i=n.shift(),a=i.match(/^\[(.+?)\]$/);if("[]"===i)return e=e||[],Array.isArray(e)?e.push(r(null,n,t)):(e._values=e._values||[],e._values.push(r(null,n,t))),e;if(a){var o=a[1],s=+o;isNaN(s)?(e=e||{},e[o]=r(e[o],n,t)):(e=e||[],e[s]=r(e[s],n,t))}else e[i]=r(e[i],n,t);return e}function o(e,n,t){var i=n.match(u);if(i){var o=a(n);r(e,o,t)}else{var s=e[n];s?(Array.isArray(s)||(e[n]=[s]),e[n].push(t)):e[n]=t}return e}function s(e,n,t){return t=t.replace(/(\r)?\n/g,"\r\n"),t=encodeURIComponent(t),t=t.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(n)+"="+t}var l=/^(?:submit|button|image|reset|file)$/i,d=/^(?:input|select|textarea|keygen)/i,u=/(\[[^\[\]]*\])/g;n.exports=i},{}]},{},[1]);